<!DOCTYPE html>
<html>
  <style>
    #giphy-results{
      height:300px;
      background-color:lightgray;
      overflow:scroll;
    }
  </style>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <title>Giphy Hack</title>
  </head>
  <body>
    <div>
      Yammer OAuth Token:
      <input type="text" id="yammer-token">
    <div>
      Search Giphy:
      <input type="text" id="search-query">
      <button id="search-button">Search</button>
    </div>
    <div id="giphy-results">
    </div>
    <button id="post-button">Post to Yammer</button>
  </body>
  <script>
    $('#search-button').click(function(){
      var query = $('#search-query').val();
      $.ajax({
        url:"http://api.giphy.com/v1/gifs/search?q=" + query + "&api_key=dc6zaTOxFJmzC&limit=10",
        type:"GET",
        success: function(data, textStatus, request){
          $(data['data']).each(function(){
            image_url = $(this)[0]['images']['fixed_height']['url'];
            $('#giphy-results').append('<img class="image" src="' + image_url + '">')
          });
        }
      });
    });
    $(document).on('click', '.image', function(){
      image = $(this);
      $('.image').css('border', '');
      image.css('border', '3px red solid');
      console.log(image.attr('src'));
      console.log($('#post-button').data('gif'));
      $('#post-button').data('gif', image.attr('src'))
    })
    $('#post-button').click(function(){
      var token = $('#yammer-token').val();
      var gif_url = $('#post-button').data('gif');
      $.ajax({
        url:"/post",
        type:"POST",
        data:"token=" + token + "&gif_url=" + encodeURIComponent(gif_url)
      });
    });
  </script>
</html>